<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>    
        <title>PokeTracker - Home</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0" />
        <meta name="description" content="Use Nuztracker to keep track of all of your Pokemon!" />
        <meta name="author" content="Trevor Covington" />
        <meta name="author" content="tcovington189@gmail.com" />
        <meta name="application-name" content="PokeTracker" />
        
        <!-- favicon info -->
        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="images/favicons/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/favicons/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/favicons/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/favicons/apple-touch-icon-144x144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="images/favicons/apple-touch-icon-60x60.png" />
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/favicons/apple-touch-icon-120x120.png" />
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="images/favicons/apple-touch-icon-76x76.png" />
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/favicons/apple-touch-icon-152x152.png" />
        <link rel="icon" type="image/png" href="images/favicons/favicon-196x196.png" sizes="196x196" />
        <link rel="icon" type="image/png" href="images/favicons/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="images/favicons/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="images/favicons/favicon-16x16.png" sizes="16x16" />
        <link rel="icon" type="image/png" href="images/favicons/favicon-128.png" sizes="128x128" />
        <meta name="application-name" content="PokeTracker"/>
        <meta name="msapplication-TileColor" content="#FFFFFF" />
        <meta name="msapplication-TileImage" content="images/favicons/mstile-144x144.png" />
        <meta name="msapplication-square70x70logo" content="images/favicons/mstile-70x70.png" />
        <meta name="msapplication-square150x150logo" content="images/favicons/mstile-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="images/favicons/mstile-310x150.png" />
        <meta name="msapplication-square310x310logo" content="images/favicons/mstile-310x310.png" />

        
        <!-- Stylesheets -->
        <link rel="stylesheet" href="css/poke_tracker.min.css" type="text/css">
        <link rel="stylesheet" href="css/poke_tracker.css" type="text/css">
                
    </head>
<body>

<div class="header">
  <div class="header-brand">
        <a href="/">
            <img class="header-brand-logo" src="images/poketracker-title.png" alt="">
        </a>
    </div>
   <div class="header-game-block">
       <img class="header-game-icon__oras" src="images/pokemon-or-logo.png" alt="">&nbsp;<span class="font-size-small">Omega Ruby</span>
   </div>    
    <div class="header-settings">
        <button class="button button_settings"></button>
    </div>
</div><!-- end .header-->

<div class="container">        
    
    <div class="block block-route">                    
       <div class="block-route-info">
           <div class="block-route-header">
               <h3></h3>
           </div>
           <div class="card block-route-paths">               
           </div>
       </div>                   
    </div>
    
    <div class="block block-encounters">
       
       <h3 class="text-center">Encounters</h3>
       <div class="block-encounters-pokemon">
           <div class="card card-default card_pokemon">
               <div class="card_pokemon-pokeball">
                   <img class="card_pokemon-pokeball-icon" src="images/pokeball-no-catch.png" alt="" >
               </div>
               <div class="card_pokemon-info">
                  <div class="pokemon-info-bio">
                      <div class="pokemon-info-bio-name-sprite">
                          <i class="sprites Bulbasaur"></i>
                          <span class="pokemon-bio-name">Bulbasaur</span>
                      </div>
                     <div class="pokemon-bio-types">
                          <i class="type-icon Grass"></i>&nbsp;<i class="type-icon Poison"></i>
                      </div>
                  </div> 
                  <hr>
                  <div class="pokemon-info-rates">
                      <div class="pokemon-rate-block"><span class="type">Grass:&nbsp;</span><span class="rate">30%</span>
                      </div>
                      
                  </div>
               </div>
           </div>              
       </div>       
    </div>
    
</div>
<footer class="footer"></footer><!-- end footer-->
<script src="scripts/jquery.min.js"></script>
<script src="src/js/load_data.js"></script>
<script>
    //Test
    localStorage.setItem('current_location', 'route 101');
    var lastLocation = localStorage.getItem('current_location');
    
    //Get data from localStorage
    regionalDexData     = JSON.parse(localStorage.getItem('regional_dex'));
    nationalDexData     = JSON.parse(localStorage.getItem('national_dex'));
    locationData        = JSON.parse(localStorage.getItem('locations'));       
    
    $.each(locationData.locations, function (i, val){
        if (val.name = lastLocation) {            
            localStorage.setItem('current_location', JSON.stringify(val));
            currentLocationData = JSON.parse(localStorage.getItem('current_location'));
        }
    })
    
    
    
    $(document).ready(function(){
        //Populate the HTML                                        
        
        //Route header
        $('.block-route-header h3').text(currentLocationData.name);
        
        //Exits
        exitInfo = [];
        $.each(currentLocationData.exits, function (i, val) {
            var theHtml = '<div class="block-path-group">' +
                          '<span class="block-path-group_direction">'+ i +'</span>' +
                          '<button class="button button_route" type="button">'+ val +'</button>' +
                          '</div>';
            exitInfo.push(theHtml);
        });
        $.each(exitInfo, function(i, val){
            $('.block-route-paths').append(val);
        });
        
        //Encounters
        encountersInfo = [];
        $.each(currentLocationData.encounters, function (i, val){
            if (val.post_elite_four != 'yes') {
                var encounterObject = {
                    'type' : val.type,
                    'encounters' : encounterArr = []
                };            
                $.each(val.pokemon, function(i, pokemon){                
                      var theHtml = '<div class="block-encounters-pokemon">' +
                                      '<div class="card card-default card_pokemon">' +
                                        '<div class="card_pokemon-pokeball">' +
                                            '<img class="card_pokemon-pokeball-icon" src="images/pokeball-no-catch.png" alt="">' +
                                        '</div>' +
                                        '<div class="card_pokemon-info">' +
                                            '<div class="pokemon-info-bio">' +
                                                '<div class="pokemon-info-bio-name-sprite">' +
                                                    '<i class="sprites '+ pokemon.name +'"></i>' +
                                                    '<span class="pokemon-bio-name">'+ pokemon.name +'</span>' +
                                                '</div>'+
                                                '<div class="pokemon-bio-types">';
                                                   $.each(val.pokemon[i].type, function (i, type){
                                                       theHtml += '<i class="type-icon '+ type +' "></i>'; 
                                                   })
                                                theHtml += '</div>' +
                                            '</div>' +
                                            '<hr>' +
                                            '<div class="pokemon-info-rates">' +
                                                '<div class="pokemon-rate-block">' +
                                                    '<span class="type">'+ val.type +'&nbsp;</span><span class="rate">'+ pokemon.rate +'</span>' +
                                                '</div>'+
                                            '</div>' +
                                        '</div>' +
                                      '</div>' +
                                    '</div>';

                        encounterArr.push(theHtml)                
                })            
            encountersInfo.push(encounterObject)
            }
        });
        $.each(encountersInfo, function (i, val) {
            $('.block-encounters').append('<h4>'+ val.type + '</h4>');
            
            $.each(val.encounters, function (i,val){
                $('.block-encounters').append(val);  
            })            
        })
    })
    console.log(currentLocationData);
</script>
<!--
    <script>                
        //See how much room is in localStorage
        var total = 0;
        for(var x in localStorage) {
          var amount = (localStorage[x].length * 2) / 1024 / 1024;
          total += amount;
          console.log( x + " = " + amount.toFixed(6) + " MB");
        }
        
        console.log( "Total: " + total.toFixed(2) + " MB");
    </script>
-->
</body>
</html>
